{"version":3,"file":"WEMA.js","names":["_indicator","require","_SMA","WEMA","Indicator","period","price","result","generator","constructor","input","priceArray","values","exponent","sma","SMA","genFn","tick","prevEma","undefined","nextValue","next","forEach","value","push","format","calculate","wema","exports","reverseInputs","reversedInput","reverse"],"sources":["../../src/moving_averages/WEMA.ts"],"sourcesContent":["import { Indicator, IndicatorInput } from '../indicator/indicator';\r\nimport { MAInput, SMA } from './SMA';\r\nimport { LinkedList } from '../Utils/LinkedList';\r\n\r\nexport class WEMA extends Indicator{\r\n    period:number;\r\n    price:number[];\r\n    result : number[];\r\n    generator:IterableIterator<number | undefined>;\r\n    constructor(input:MAInput) {\r\n        super(input);\r\n        var period = input.period\r\n        var priceArray = input.values;\r\n        var exponent = 1 / period;\r\n        var sma:SMA;\r\n\r\n        this.result = [];\r\n\r\n        sma = new SMA({period : period, values :[]});\r\n\r\n        var genFn = (function* ():IterableIterator<number | undefined>{\r\n            var tick  = yield;\r\n            var prevEma;\r\n            while (true) {\r\n                if(prevEma !== undefined && tick !== undefined){\r\n                    prevEma = ((tick - prevEma) * exponent) + prevEma;\r\n                    tick = yield prevEma;\r\n                }else {\r\n                    tick = yield;\r\n                    prevEma = sma.nextValue(tick)\r\n                    if(prevEma !== undefined)\r\n                        tick = yield prevEma;\r\n                }\r\n            }\r\n        });\r\n\r\n        this.generator = genFn();\r\n\r\n        this.generator.next();\r\n        this.generator.next();\r\n\r\n        priceArray.forEach((tick) => {\r\n            var result = this.generator.next(tick);\r\n            if(result.value != undefined){\r\n                this.result.push(this.format(result.value));\r\n            }\r\n        });\r\n    }\r\n\r\n    static calculate = wema;\r\n\r\n    nextValue(price:number):number | undefined {\r\n        var result = this.generator.next(price).value;\r\n        if(result!=undefined)\r\n            return this.format(result);\r\n    };\r\n}\r\n\r\nexport function wema(input:MAInput):number[] {\r\n      Indicator.reverseInputs(input);\r\n      var result = new WEMA(input).result;\r\n      if(input.reversedInput) {\r\n          result.reverse();\r\n      }\r\n      Indicator.reverseInputs(input);\r\n      return result;\r\n  }\r\n"],"mappings":";;;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AACA,IAAAC,IAAA,GAAAD,OAAA;AAGO,MAAME,IAAI,SAASC,oBAAS;EAC/BC,MAAM;EACNC,KAAK;EACLC,MAAM;EACNC,SAAS;EACTC,WAAWA,CAACC,KAAa,EAAE;IACvB,KAAK,CAACA,KAAK,CAAC;IACZ,IAAIL,MAAM,GAAGK,KAAK,CAACL,MAAM;IACzB,IAAIM,UAAU,GAAGD,KAAK,CAACE,MAAM;IAC7B,IAAIC,QAAQ,GAAG,CAAC,GAAGR,MAAM;IACzB,IAAIS,GAAO;IAEX,IAAI,CAACP,MAAM,GAAG,EAAE;IAEhBO,GAAG,GAAG,IAAIC,QAAG,CAAC;MAACV,MAAM,EAAGA,MAAM;MAAEO,MAAM,EAAE;IAAE,CAAC,CAAC;IAE5C,IAAII,KAAK,GAAI,UAAAA,CAAA,EAAiD;MAC1D,IAAIC,IAAI,GAAI,KAAK;MACjB,IAAIC,OAAO;MACX,OAAO,IAAI,EAAE;QACT,IAAGA,OAAO,KAAKC,SAAS,IAAIF,IAAI,KAAKE,SAAS,EAAC;UAC3CD,OAAO,GAAI,CAACD,IAAI,GAAGC,OAAO,IAAIL,QAAQ,GAAIK,OAAO;UACjDD,IAAI,GAAG,MAAMC,OAAO;QACxB,CAAC,MAAK;UACFD,IAAI,GAAG,KAAK;UACZC,OAAO,GAAGJ,GAAG,CAACM,SAAS,CAACH,IAAI,CAAC;UAC7B,IAAGC,OAAO,KAAKC,SAAS,EACpBF,IAAI,GAAG,MAAMC,OAAO;QAC5B;MACJ;IACJ,CAAE;IAEF,IAAI,CAACV,SAAS,GAAGQ,KAAK,CAAC,CAAC;IAExB,IAAI,CAACR,SAAS,CAACa,IAAI,CAAC,CAAC;IACrB,IAAI,CAACb,SAAS,CAACa,IAAI,CAAC,CAAC;IAErBV,UAAU,CAACW,OAAO,CAAEL,IAAI,IAAK;MACzB,IAAIV,MAAM,GAAG,IAAI,CAACC,SAAS,CAACa,IAAI,CAACJ,IAAI,CAAC;MACtC,IAAGV,MAAM,CAACgB,KAAK,IAAIJ,SAAS,EAAC;QACzB,IAAI,CAACZ,MAAM,CAACiB,IAAI,CAAC,IAAI,CAACC,MAAM,CAAClB,MAAM,CAACgB,KAAK,CAAC,CAAC;MAC/C;IACJ,CAAC,CAAC;EACN;EAEA,OAAOG,SAAS,GAAGC,IAAI;EAEvBP,SAASA,CAACd,KAAY,EAAqB;IACvC,IAAIC,MAAM,GAAG,IAAI,CAACC,SAAS,CAACa,IAAI,CAACf,KAAK,CAAC,CAACiB,KAAK;IAC7C,IAAGhB,MAAM,IAAEY,SAAS,EAChB,OAAO,IAAI,CAACM,MAAM,CAAClB,MAAM,CAAC;EAClC;AACJ;AAACqB,OAAA,CAAAzB,IAAA,GAAAA,IAAA;AAEM,SAASwB,IAAIA,CAACjB,KAAa,EAAW;EACvCN,oBAAS,CAACyB,aAAa,CAACnB,KAAK,CAAC;EAC9B,IAAIH,MAAM,GAAG,IAAIJ,IAAI,CAACO,KAAK,CAAC,CAACH,MAAM;EACnC,IAAGG,KAAK,CAACoB,aAAa,EAAE;IACpBvB,MAAM,CAACwB,OAAO,CAAC,CAAC;EACpB;EACA3B,oBAAS,CAACyB,aAAa,CAACnB,KAAK,CAAC;EAC9B,OAAOH,MAAM;AACjB","ignoreList":[]}