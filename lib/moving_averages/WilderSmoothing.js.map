{"version":3,"file":"WilderSmoothing.js","names":["_indicator","require","_LinkedList","WilderSmoothing","Indicator","period","price","result","generator","constructor","input","values","genFn","list","LinkedList","sum","counter","current","undefined","next","forEach","tick","value","push","format","calculate","wildersmoothing","nextValue","exports","reverseInputs","reversedInput","reverse"],"sources":["../../src/moving_averages/WilderSmoothing.ts"],"sourcesContent":["import { MAInput } from './SMA';\r\nimport { Indicator, IndicatorInput } from '../indicator/indicator';\r\nimport { LinkedList } from '../Utils/LinkedList';\r\n\r\n//STEP3. Add class based syntax with export\r\nexport class WilderSmoothing extends Indicator{\r\n    period:number;\r\n    price:number[];\r\n    result : number[];\r\n    generator:IterableIterator<number | undefined>;\r\n    constructor(input:MAInput) {\r\n        super(input);\r\n        this.period  = input.period;\r\n        this.price = input.values;\r\n        var genFn = (function*(period:number):IterableIterator<number | undefined> {\r\n            var list = new LinkedList();\r\n            var sum = 0;\r\n            var counter = 1;\r\n            var current = yield;\r\n            var result = 0;\r\n            while(true){\r\n                if(counter < period){\r\n                    counter ++;\r\n                    sum = sum + current;\r\n                    result = undefined;\r\n                } else if(counter == period){\r\n                    counter ++;\r\n                    sum = sum + current;\r\n                    result = sum;\r\n                }\r\n                else{\r\n                    result = result - (result / period) + current;\r\n                }\r\n                current = yield result;\r\n            }\r\n        });\r\n        this.generator = genFn(this.period);\r\n        this.generator.next();\r\n        this.result = [];\r\n        this.price.forEach((tick) => {\r\n            var result = this.generator.next(tick);\r\n            if(result.value != undefined){\r\n                this.result.push(this.format(result.value));\r\n            }\r\n        });\r\n    }\r\n    \r\n    static calculate = wildersmoothing;\r\n\r\n    nextValue(price:number):number | undefined {\r\n        var result = this.generator.next(price).value;\r\n        if(result != undefined)\r\n            return this.format(result);\r\n    };\r\n}\r\n\r\nexport function wildersmoothing(input:MAInput):number[] {\r\n    Indicator.reverseInputs(input);\r\n    var result = new WilderSmoothing(input).result;\r\n    if(input.reversedInput) {\r\n        result.reverse();\r\n    }\r\n    Indicator.reverseInputs(input);\r\n    return result;\r\n};\r\n\r\n//STEP 6. Run the tests"],"mappings":";;;;;;;AACA,IAAAA,UAAA,GAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AAEA;AACO,MAAME,eAAe,SAASC,oBAAS;EAC1CC,MAAM;EACNC,KAAK;EACLC,MAAM;EACNC,SAAS;EACTC,WAAWA,CAACC,KAAa,EAAE;IACvB,KAAK,CAACA,KAAK,CAAC;IACZ,IAAI,CAACL,MAAM,GAAIK,KAAK,CAACL,MAAM;IAC3B,IAAI,CAACC,KAAK,GAAGI,KAAK,CAACC,MAAM;IACzB,IAAIC,KAAK,GAAI,UAAAA,CAAUP,MAAa,EAAuC;MACvE,IAAIQ,IAAI,GAAG,IAAIC,sBAAU,CAAC,CAAC;MAC3B,IAAIC,GAAG,GAAG,CAAC;MACX,IAAIC,OAAO,GAAG,CAAC;MACf,IAAIC,OAAO,GAAG,KAAK;MACnB,IAAIV,MAAM,GAAG,CAAC;MACd,OAAM,IAAI,EAAC;QACP,IAAGS,OAAO,GAAGX,MAAM,EAAC;UAChBW,OAAO,EAAG;UACVD,GAAG,GAAGA,GAAG,GAAGE,OAAO;UACnBV,MAAM,GAAGW,SAAS;QACtB,CAAC,MAAM,IAAGF,OAAO,IAAIX,MAAM,EAAC;UACxBW,OAAO,EAAG;UACVD,GAAG,GAAGA,GAAG,GAAGE,OAAO;UACnBV,MAAM,GAAGQ,GAAG;QAChB,CAAC,MACG;UACAR,MAAM,GAAGA,MAAM,GAAIA,MAAM,GAAGF,MAAO,GAAGY,OAAO;QACjD;QACAA,OAAO,GAAG,MAAMV,MAAM;MAC1B;IACJ,CAAE;IACF,IAAI,CAACC,SAAS,GAAGI,KAAK,CAAC,IAAI,CAACP,MAAM,CAAC;IACnC,IAAI,CAACG,SAAS,CAACW,IAAI,CAAC,CAAC;IACrB,IAAI,CAACZ,MAAM,GAAG,EAAE;IAChB,IAAI,CAACD,KAAK,CAACc,OAAO,CAAEC,IAAI,IAAK;MACzB,IAAId,MAAM,GAAG,IAAI,CAACC,SAAS,CAACW,IAAI,CAACE,IAAI,CAAC;MACtC,IAAGd,MAAM,CAACe,KAAK,IAAIJ,SAAS,EAAC;QACzB,IAAI,CAACX,MAAM,CAACgB,IAAI,CAAC,IAAI,CAACC,MAAM,CAACjB,MAAM,CAACe,KAAK,CAAC,CAAC;MAC/C;IACJ,CAAC,CAAC;EACN;EAEA,OAAOG,SAAS,GAAGC,eAAe;EAElCC,SAASA,CAACrB,KAAY,EAAqB;IACvC,IAAIC,MAAM,GAAG,IAAI,CAACC,SAAS,CAACW,IAAI,CAACb,KAAK,CAAC,CAACgB,KAAK;IAC7C,IAAGf,MAAM,IAAIW,SAAS,EAClB,OAAO,IAAI,CAACM,MAAM,CAACjB,MAAM,CAAC;EAClC;AACJ;AAACqB,OAAA,CAAAzB,eAAA,GAAAA,eAAA;AAEM,SAASuB,eAAeA,CAAChB,KAAa,EAAW;EACpDN,oBAAS,CAACyB,aAAa,CAACnB,KAAK,CAAC;EAC9B,IAAIH,MAAM,GAAG,IAAIJ,eAAe,CAACO,KAAK,CAAC,CAACH,MAAM;EAC9C,IAAGG,KAAK,CAACoB,aAAa,EAAE;IACpBvB,MAAM,CAACwB,OAAO,CAAC,CAAC;EACpB;EACA3B,oBAAS,CAACyB,aAAa,CAACnB,KAAK,CAAC;EAC9B,OAAOH,MAAM;AACjB;AAAC;;AAED","ignoreList":[]}