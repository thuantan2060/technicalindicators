{"version":3,"file":"SMA.js","names":["_indicator","require","_LinkedList","MAInput","IndicatorInput","constructor","period","values","exports","SMA","Indicator","price","result","generator","input","genFn","list","LinkedList","sum","counter","current","push","shift","next","forEach","tick","value","undefined","format","calculate","sma","nextValue","reverseInputs","reversedInput","reverse"],"sources":["../../src/moving_averages/SMA.ts"],"sourcesContent":["//STEP 1. Import Necessary indicator or rather last step\r\nimport { Indicator, IndicatorInput } from '../indicator/indicator';\r\nimport { LinkedList } from '../Utils/LinkedList';\r\n\r\n//STEP 2. Create the input for the indicator, mandatory should be in the constructor\r\nexport class MAInput extends IndicatorInput {\r\n    constructor(public period:number, \r\n                public values:number[]) {\r\n        super();\r\n    }\r\n}\r\n\r\n//STEP3. Add class based syntax with export\r\nexport class SMA extends Indicator{\r\n    period:number;\r\n    price:number[];\r\n    result : number[];\r\n    generator:IterableIterator<number | undefined>;\r\n    constructor(input:MAInput) {\r\n        super(input);\r\n        this.period  = input.period;\r\n        this.price = input.values;\r\n        var genFn = (function*(period:number):IterableIterator<number | undefined> {\r\n            var list = new LinkedList();\r\n            var sum = 0;\r\n            var counter = 1;\r\n            var current = yield;\r\n            var result;\r\n            list.push(0);\r\n            while(true){\r\n                if(counter < period){\r\n                    counter ++;\r\n                    list.push(current);\r\n                    sum = sum + current;\r\n                }\r\n                else{\r\n                    sum = sum - list.shift() + current;\r\n                    result = ((sum) / period);\r\n                    list.push(current);\r\n                }\r\n                current = yield result;\r\n            }\r\n        });\r\n        this.generator = genFn(this.period);\r\n        this.generator.next();\r\n        this.result = [];\r\n        this.price.forEach((tick) => {\r\n            var result = this.generator.next(tick);\r\n            if(result.value !== undefined){\r\n                this.result.push(this.format(result.value));\r\n            }\r\n        });\r\n    }\r\n    \r\n    static calculate = sma;\r\n\r\n    nextValue(price:number):number | undefined {\r\n        var result = this.generator.next(price).value;\r\n        if(result != undefined)\r\n            return this.format(result);\r\n    };\r\n}\r\n\r\nexport function sma(input:MAInput):number[] {\r\n    Indicator.reverseInputs(input);\r\n    var result = new SMA(input).result;\r\n    if(input.reversedInput) {\r\n        result.reverse();\r\n    }\r\n    Indicator.reverseInputs(input);\r\n    return result;\r\n};\r\n\r\n//STEP 6. Run the tests"],"mappings":";;;;;;;AACA,IAAAA,UAAA,GAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AAFA;;AAIA;AACO,MAAME,OAAO,SAASC,yBAAc,CAAC;EACxCC,WAAWA,CAAQC,MAAa,EACbC,MAAe,EAAE;IAChC,KAAK,CAAC,CAAC;IAAC,KAFOD,MAAa,GAAbA,MAAa;IAAA,KACbC,MAAe,GAAfA,MAAe;EAElC;AACJ;;AAEA;AAAAC,OAAA,CAAAL,OAAA,GAAAA,OAAA;AACO,MAAMM,GAAG,SAASC,oBAAS;EAC9BJ,MAAM;EACNK,KAAK;EACLC,MAAM;EACNC,SAAS;EACTR,WAAWA,CAACS,KAAa,EAAE;IACvB,KAAK,CAACA,KAAK,CAAC;IACZ,IAAI,CAACR,MAAM,GAAIQ,KAAK,CAACR,MAAM;IAC3B,IAAI,CAACK,KAAK,GAAGG,KAAK,CAACP,MAAM;IACzB,IAAIQ,KAAK,GAAI,UAAAA,CAAUT,MAAa,EAAuC;MACvE,IAAIU,IAAI,GAAG,IAAIC,sBAAU,CAAC,CAAC;MAC3B,IAAIC,GAAG,GAAG,CAAC;MACX,IAAIC,OAAO,GAAG,CAAC;MACf,IAAIC,OAAO,GAAG,KAAK;MACnB,IAAIR,MAAM;MACVI,IAAI,CAACK,IAAI,CAAC,CAAC,CAAC;MACZ,OAAM,IAAI,EAAC;QACP,IAAGF,OAAO,GAAGb,MAAM,EAAC;UAChBa,OAAO,EAAG;UACVH,IAAI,CAACK,IAAI,CAACD,OAAO,CAAC;UAClBF,GAAG,GAAGA,GAAG,GAAGE,OAAO;QACvB,CAAC,MACG;UACAF,GAAG,GAAGA,GAAG,GAAGF,IAAI,CAACM,KAAK,CAAC,CAAC,GAAGF,OAAO;UAClCR,MAAM,GAAKM,GAAG,GAAIZ,MAAO;UACzBU,IAAI,CAACK,IAAI,CAACD,OAAO,CAAC;QACtB;QACAA,OAAO,GAAG,MAAMR,MAAM;MAC1B;IACJ,CAAE;IACF,IAAI,CAACC,SAAS,GAAGE,KAAK,CAAC,IAAI,CAACT,MAAM,CAAC;IACnC,IAAI,CAACO,SAAS,CAACU,IAAI,CAAC,CAAC;IACrB,IAAI,CAACX,MAAM,GAAG,EAAE;IAChB,IAAI,CAACD,KAAK,CAACa,OAAO,CAAEC,IAAI,IAAK;MACzB,IAAIb,MAAM,GAAG,IAAI,CAACC,SAAS,CAACU,IAAI,CAACE,IAAI,CAAC;MACtC,IAAGb,MAAM,CAACc,KAAK,KAAKC,SAAS,EAAC;QAC1B,IAAI,CAACf,MAAM,CAACS,IAAI,CAAC,IAAI,CAACO,MAAM,CAAChB,MAAM,CAACc,KAAK,CAAC,CAAC;MAC/C;IACJ,CAAC,CAAC;EACN;EAEA,OAAOG,SAAS,GAAGC,GAAG;EAEtBC,SAASA,CAACpB,KAAY,EAAqB;IACvC,IAAIC,MAAM,GAAG,IAAI,CAACC,SAAS,CAACU,IAAI,CAACZ,KAAK,CAAC,CAACe,KAAK;IAC7C,IAAGd,MAAM,IAAIe,SAAS,EAClB,OAAO,IAAI,CAACC,MAAM,CAAChB,MAAM,CAAC;EAClC;AACJ;AAACJ,OAAA,CAAAC,GAAA,GAAAA,GAAA;AAEM,SAASqB,GAAGA,CAAChB,KAAa,EAAW;EACxCJ,oBAAS,CAACsB,aAAa,CAAClB,KAAK,CAAC;EAC9B,IAAIF,MAAM,GAAG,IAAIH,GAAG,CAACK,KAAK,CAAC,CAACF,MAAM;EAClC,IAAGE,KAAK,CAACmB,aAAa,EAAE;IACpBrB,MAAM,CAACsB,OAAO,CAAC,CAAC;EACpB;EACAxB,oBAAS,CAACsB,aAAa,CAAClB,KAAK,CAAC;EAC9B,OAAOF,MAAM;AACjB;AAAC;;AAED","ignoreList":[]}