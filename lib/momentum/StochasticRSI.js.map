{"version":3,"file":"StochasticRSI.js","names":["_indicator","require","_SMA","_RSI","_Stochastic","StochasticRsiInput","IndicatorInput","values","rsiPeriod","stochasticPeriod","kPeriod","dPeriod","exports","StochasticRSIOutput","stochRSI","k","d","StochasticRSI","Indicator","result","generator","constructor","input","closes","format","index","rsi","RSI","period","stochastic","Stochastic","high","low","close","signalPeriod","dSma","SMA","v","lastRSI","stochasticRSI","tick","nextValue","undefined","stochasticInput","next","forEach","value","push","calculate","stochasticrsi","nextResult","reverseInputs","reversedInput","reverse"],"sources":["../../src/momentum/StochasticRSI.ts"],"sourcesContent":["import { IndicatorInput, Indicator } from '../indicator/indicator';\r\n/**\r\n * Created by AAravindan on 5/10/16.\r\n */\r\n\"use strict\"\r\n\r\nimport LinkedList from '../Utils/FixedSizeLinkedList';\r\nimport { SMA }  from '../moving_averages/SMA';\r\nimport { RSI } from '../oscillators/RSI';\r\nimport { Stochastic } from '../momentum/Stochastic';\r\n\r\nexport class StochasticRsiInput extends IndicatorInput{\r\n  values : number[];\r\n  rsiPeriod:number;\r\n  stochasticPeriod:number;\r\n  kPeriod:number;\r\n  dPeriod:number;\r\n};\r\n\r\nexport class StochasticRSIOutput{\r\n  stochRSI : number\r\n  k:number;\r\n  d:number;\r\n};\r\n\r\nexport class StochasticRSI extends Indicator {\r\n  result:StochasticRSIOutput[]\r\n  generator:IterableIterator<StochasticRSIOutput | undefined>;\r\n  constructor (input:StochasticRsiInput) {\r\n    super(input);\r\n    let closes = input.values;\r\n    let rsiPeriod = input.rsiPeriod;\r\n    let stochasticPeriod = input.stochasticPeriod;\r\n    let kPeriod = input.kPeriod;\r\n    let dPeriod = input.dPeriod;\r\n    let format = this.format;\r\n    this.result = [];\r\n    this.generator = (function* (){\r\n      let index = 1;\r\n      let rsi = new RSI({ period : rsiPeriod, values : []});\r\n      let stochastic = new Stochastic({ period : stochasticPeriod, high : [], low: [], close: [], signalPeriod : kPeriod});\r\n      let dSma = new SMA({\r\n        period : dPeriod,\r\n        values : [],\r\n        format : (v) => {return v}\r\n      });\r\n      let lastRSI, stochasticRSI, d, result;\r\n      var tick = yield;\r\n      while (true) {\r\n        lastRSI = rsi.nextValue(tick);\r\n        if(lastRSI !== undefined) {\r\n          var stochasticInput  = { high : lastRSI, low : lastRSI, close: lastRSI } as any;\r\n          stochasticRSI = stochastic.nextValue(stochasticInput);\r\n          if(stochasticRSI !== undefined && stochasticRSI.d !== undefined) {\r\n            d = dSma.nextValue(stochasticRSI.d);\r\n            if(d !== undefined)\r\n              result =  {\r\n                stochRSI : stochasticRSI.k,\r\n                k: stochasticRSI.d,\r\n                d : d\r\n              }\r\n          }\r\n        }\r\n        tick = yield result;\r\n      }\r\n    })();\r\n\r\n    this.generator.next();\r\n\r\n    closes.forEach((tick, index) => {\r\n      var result = this.generator.next(tick);\r\n      if(result.value !== undefined){\r\n        this.result.push(result.value);\r\n      }\r\n    });\r\n  };\r\n\r\n  static calculate = stochasticrsi\r\n\r\n  nextValue (input:StochasticRsiInput):StochasticRSIOutput {\r\n    let nextResult = this.generator.next(input);\r\n    if(nextResult.value !== undefined)\r\n      return nextResult.value;\r\n  };\r\n}\r\n\r\nexport function stochasticrsi(input:StochasticRsiInput):StochasticRSIOutput[] {\r\n    Indicator.reverseInputs(input);\r\n    var result = new StochasticRSI(input).result;\r\n    if(input.reversedInput) {\r\n        result.reverse();\r\n    }\r\n    Indicator.reverseInputs(input);\r\n    return result;\r\n};"],"mappings":"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","ignoreList":[]}