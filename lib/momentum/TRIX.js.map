{"version":3,"file":"TRIX.js","names":["Object","defineProperty","exports","value","TRIXInput","TRIX","trix","_ROC","require","_EMA","_indicator","IndicatorInput","values","period","Indicator","result","generator","constructor","input","priceArray","format","ema","EMA","v","emaOfema","emaOfemaOfema","trixROC","ROC","tick","initialema","nextValue","smoothedResult","undefined","doubleSmoothedResult","next","forEach","push","calculate","price","nextResult","reverseInputs","reversedInput","reverse"],"sources":["../../src/momentum/TRIX.ts"],"sourcesContent":["/**\r\n * Created by AAravindan on 5/9/16.\r\n */\r\n\"use strict\"\r\n\r\nimport { ROC } from './ROC.js';\r\nimport { EMA } from '../moving_averages/EMA.js';\r\nimport { Indicator, IndicatorInput } from '../indicator/indicator';\r\n\r\nexport class TRIXInput extends IndicatorInput{\r\n  values:number[];\r\n  period:number;\r\n};\r\n\r\nexport class TRIX extends Indicator {\r\n  result : number[];\r\n  generator:IterableIterator<number | undefined>;\r\n  constructor(input:TRIXInput) {\r\n    super(input);\r\n    let priceArray  = input.values;\r\n    let period      = input.period;\r\n    let format = this.format;\r\n\r\n    let ema              = new EMA({ period : period, values : [], format : (v) => {return v}});\r\n    let emaOfema         = new EMA({ period : period, values : [], format : (v) => {return v}});\r\n    let emaOfemaOfema    = new EMA({ period : period, values : [], format : (v) => {return v}});\r\n    let trixROC          = new ROC({ period : 1, values : [], format : (v) => {return v}});\r\n\r\n    this.result = [];\r\n\r\n    this.generator = (function* ():IterableIterator< number | undefined>{\r\n      let tick = yield;\r\n      while (true) {\r\n        let initialema           = ema.nextValue(tick);\r\n        let smoothedResult       = initialema ? emaOfema.nextValue(initialema) : undefined;\r\n        let doubleSmoothedResult = smoothedResult ? emaOfemaOfema.nextValue(smoothedResult) : undefined;\r\n        let result               = doubleSmoothedResult ? trixROC.nextValue(doubleSmoothedResult) : undefined;\r\n        tick = yield result ? format(result) : undefined;\r\n      }\r\n    })();\r\n\r\n    this.generator.next();\r\n\r\n    priceArray.forEach((tick) => {\r\n      let result = this.generator.next(tick);\r\n      if(result.value !== undefined){\r\n        this.result.push(result.value);\r\n      }\r\n    });\r\n  }\r\n    \r\n    static calculate=trix;\r\n\r\n    nextValue(price:number) {\r\n      let nextResult = this.generator.next(price);\r\n      if(nextResult.value !== undefined)\r\n        return nextResult.value;\r\n    };\r\n} \r\n\r\nexport function trix(input:TRIXInput):number[] {\r\n    Indicator.reverseInputs(input);\r\n    var result = new TRIX(input).result;\r\n    if(input.reversedInput) {\r\n        result.reverse();\r\n    }\r\n    Indicator.reverseInputs(input);\r\n    return result;\r\n};  \r\n"],"mappings":"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","ignoreList":[]}