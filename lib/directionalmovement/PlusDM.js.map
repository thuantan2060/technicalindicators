{"version":3,"file":"PlusDM.js","names":["_indicator","require","PDMInput","IndicatorInput","low","high","exports","PDM","Indicator","result","generator","constructor","input","lows","highs","format","length","plusDm","current","last","upMove","downMove","next","forEach","tick","index","value","undefined","push","calculate","reverseInputs","reversedInput","reverse","nextValue","price"],"sources":["../../src/directionalmovement/PlusDM.ts"],"sourcesContent":["import { Indicator, IndicatorInput } from '../indicator/indicator';\r\n/**\r\n * Created by AAravindan on 5/8/16.\r\n */\r\nexport class PDMInput extends IndicatorInput {\r\n  low:number[]\r\n  high:number[]\r\n};\r\n\r\nexport class PDM extends Indicator {\r\n  result : number[];\r\n  generator:IterableIterator<number | undefined>;\r\n  constructor(input:PDMInput) {\r\n    super(input);\r\n    var lows = input.low\r\n    var highs = input.high;\r\n    var format = this.format;\r\n\r\n    if(lows.length != highs.length) {\r\n      throw ('Inputs(low,high) not of equal size');\r\n    }\r\n\r\n    this.result = [];\r\n\r\n    this.generator = (function* (){\r\n      var plusDm;\r\n      var current = yield;\r\n      var last;\r\n      while (true) {\r\n        if(last) {\r\n          let upMove = (current.high  - last.high)\r\n          let downMove = (last.low - current.low)\r\n          plusDm = format((upMove > downMove && upMove > 0) ? upMove : 0);\r\n        }\r\n        last = current;\r\n        current = yield plusDm;\r\n      }\r\n    })();\r\n\r\n    this.generator.next();\r\n\r\n    lows.forEach((tick, index) => {\r\n      var result = this.generator.next({\r\n        high : highs[index],\r\n        low  : lows[index]\r\n      });\r\n      if(result.value !== undefined)\r\n        this.result.push(result.value);\r\n    });\r\n  };\r\n\r\n  static calculate(input:PDMInput):number[] {\r\n       Indicator.reverseInputs(input);\r\n        var result = new PDM(input).result;\r\n        if(input.reversedInput) {\r\n            result.reverse();\r\n        }\r\n        Indicator.reverseInputs(input);\r\n        return result;\r\n    };\r\n\r\n    nextValue(price:number):number | undefined {\r\n        return this.generator.next(price).value;\r\n    };\r\n\r\n}"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AACA;AACA;AACA;AACO,MAAMC,QAAQ,SAASC,yBAAc,CAAC;EAC3CC,GAAG;EACHC,IAAI;AACN;AAACC,OAAA,CAAAJ,QAAA,GAAAA,QAAA;AAAA;AAEM,MAAMK,GAAG,SAASC,oBAAS,CAAC;EACjCC,MAAM;EACNC,SAAS;EACTC,WAAWA,CAACC,KAAc,EAAE;IAC1B,KAAK,CAACA,KAAK,CAAC;IACZ,IAAIC,IAAI,GAAGD,KAAK,CAACR,GAAG;IACpB,IAAIU,KAAK,GAAGF,KAAK,CAACP,IAAI;IACtB,IAAIU,MAAM,GAAG,IAAI,CAACA,MAAM;IAExB,IAAGF,IAAI,CAACG,MAAM,IAAIF,KAAK,CAACE,MAAM,EAAE;MAC9B,MAAO,oCAAoC;IAC7C;IAEA,IAAI,CAACP,MAAM,GAAG,EAAE;IAEhB,IAAI,CAACC,SAAS,GAAI,aAAY;MAC5B,IAAIO,MAAM;MACV,IAAIC,OAAO,GAAG,KAAK;MACnB,IAAIC,IAAI;MACR,OAAO,IAAI,EAAE;QACX,IAAGA,IAAI,EAAE;UACP,IAAIC,MAAM,GAAIF,OAAO,CAACb,IAAI,GAAIc,IAAI,CAACd,IAAK;UACxC,IAAIgB,QAAQ,GAAIF,IAAI,CAACf,GAAG,GAAGc,OAAO,CAACd,GAAI;UACvCa,MAAM,GAAGF,MAAM,CAAEK,MAAM,GAAGC,QAAQ,IAAID,MAAM,GAAG,CAAC,GAAIA,MAAM,GAAG,CAAC,CAAC;QACjE;QACAD,IAAI,GAAGD,OAAO;QACdA,OAAO,GAAG,MAAMD,MAAM;MACxB;IACF,CAAC,CAAE,CAAC;IAEJ,IAAI,CAACP,SAAS,CAACY,IAAI,CAAC,CAAC;IAErBT,IAAI,CAACU,OAAO,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAK;MAC5B,IAAIhB,MAAM,GAAG,IAAI,CAACC,SAAS,CAACY,IAAI,CAAC;QAC/BjB,IAAI,EAAGS,KAAK,CAACW,KAAK,CAAC;QACnBrB,GAAG,EAAIS,IAAI,CAACY,KAAK;MACnB,CAAC,CAAC;MACF,IAAGhB,MAAM,CAACiB,KAAK,KAAKC,SAAS,EAC3B,IAAI,CAAClB,MAAM,CAACmB,IAAI,CAACnB,MAAM,CAACiB,KAAK,CAAC;IAClC,CAAC,CAAC;EACJ;EAEA,OAAOG,SAASA,CAACjB,KAAc,EAAW;IACrCJ,oBAAS,CAACsB,aAAa,CAAClB,KAAK,CAAC;IAC7B,IAAIH,MAAM,GAAG,IAAIF,GAAG,CAACK,KAAK,CAAC,CAACH,MAAM;IAClC,IAAGG,KAAK,CAACmB,aAAa,EAAE;MACpBtB,MAAM,CAACuB,OAAO,CAAC,CAAC;IACpB;IACAxB,oBAAS,CAACsB,aAAa,CAAClB,KAAK,CAAC;IAC9B,OAAOH,MAAM;EACjB;EAEAwB,SAASA,CAACC,KAAY,EAAqB;IACvC,OAAO,IAAI,CAACxB,SAAS,CAACY,IAAI,CAACY,KAAK,CAAC,CAACR,KAAK;EAC3C;AAEJ;AAACpB,OAAA,CAAAC,GAAA,GAAAA,GAAA","ignoreList":[]}