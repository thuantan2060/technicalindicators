{"version":3,"file":"AwesomeOscillator.js","names":["_indicator","require","_SMA","AwesomeOscillatorInput","IndicatorInput","high","low","fastPeriod","slowPeriod","exports","AwesomeOscillator","Indicator","generator","constructor","input","highs","lows","slowSMA","SMA","values","period","fastSMA","result","tick","medianPrice","slowSmaValue","fastSmaValue","nextValue","undefined","next","forEach","tickHigh","index","tickInput","value","push","format","calculate","awesomeoscillator","price","reverseInputs","reversedInput","reverse"],"sources":["../../src/oscillators/AwesomeOscillator.ts"],"sourcesContent":["\r\nimport { Indicator, IndicatorInput } from '../indicator/indicator';\r\nimport { SMA } from '../moving_averages/SMA'\r\nimport { CandleData } from '../StockData';\r\n\r\nexport class AwesomeOscillatorInput extends IndicatorInput {\r\n  high:number[]\r\n  low:number[]\r\n  fastPeriod :number\r\n  slowPeriod :number\r\n}\r\n\r\nexport class AwesomeOscillator extends Indicator {\r\n  generator:IterableIterator<number | undefined>;\r\n    constructor (input:AwesomeOscillatorInput) {\r\n      super(input);\r\n      var highs       = input.high;\r\n      var lows        = input.low;\r\n      var fastPeriod  = input.fastPeriod;\r\n      var slowPeriod  = input.slowPeriod;\r\n\r\n      var slowSMA = new SMA({ values : [], period : slowPeriod })\r\n      var fastSMA = new SMA({ values : [], period : fastPeriod })\r\n\r\n      this.result = [];\r\n\r\n      this.generator = (function* (){\r\n        var result;\r\n        var tick;\r\n        var medianPrice;\r\n        var slowSmaValue;\r\n        var fastSmaValue;\r\n        tick = yield;\r\n        while (true)\r\n        {\r\n\r\n          medianPrice = (tick.high + tick.low) / 2\r\n          slowSmaValue = slowSMA.nextValue(medianPrice);\r\n          fastSmaValue = fastSMA.nextValue(medianPrice);\r\n          if(slowSmaValue !== undefined && fastSmaValue !== undefined) {\r\n            result = fastSmaValue - slowSmaValue;\r\n          }\r\n          tick = yield result\r\n        }\r\n      })();\r\n\r\n      this.generator.next();\r\n\r\n      highs.forEach((tickHigh, index) => {\r\n        var tickInput = {\r\n          high    : tickHigh,\r\n          low     : lows[index],\r\n        }\r\n        var result = this.generator.next(tickInput);\r\n        if(result.value != undefined){\r\n          this.result.push(this.format(result.value));\r\n        }\r\n      });\r\n  };\r\n\r\n  static calculate = awesomeoscillator;\r\n\r\n  nextValue(price:CandleData):number | undefined {\r\n     var result =  this.generator.next(price);\r\n     if(result.value != undefined){\r\n        return this.format(result.value);\r\n      }\r\n  };\r\n}\r\n\r\nexport function awesomeoscillator(input:AwesomeOscillatorInput):number[] {\r\n      Indicator.reverseInputs(input);\r\n      var result = new AwesomeOscillator(input).result;\r\n      if(input.reversedInput) {\r\n          result.reverse();\r\n      }\r\n      Indicator.reverseInputs(input);\r\n      return result;\r\n  };\r\n"],"mappings":"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","ignoreList":[]}