{"version":3,"file":"RSI.js","names":["_indicator","require","_AverageGain","_AverageLoss","RSIInput","IndicatorInput","period","values","exports","RSI","Indicator","generator","constructor","input","GainProvider","AverageGain","LossProvider","AverageLoss","count","current","lastAvgGain","lastAvgLoss","RS","currentRSI","nextValue","undefined","isNaN","parseFloat","toFixed","next","result","forEach","tick","value","push","calculate","rsi","price","reverseInputs","reversedInput","reverse"],"sources":["../../src/oscillators/RSI.ts"],"sourcesContent":["/**\r\n * Created by AAravindan on 5/5/16.\r\n */\r\n\r\nimport { Indicator, IndicatorInput } from '../indicator/indicator';\r\nimport { AverageGain } from '../Utils/AverageGain';\r\nimport { AverageLoss } from '../Utils/AverageLoss';\r\n\r\nexport class RSIInput extends IndicatorInput {\r\n  period: number;\r\n  values: number[];\r\n}\r\n\r\nexport class RSI extends Indicator {\r\n\r\n  generator:IterableIterator<number | undefined>;\r\n\r\n  constructor(input:RSIInput) {\r\n    super(input);\r\n\r\n    var period = input.period;\r\n    var values = input.values;\r\n\r\n    var GainProvider = new AverageGain({ period: period, values: [] });\r\n    var LossProvider = new AverageLoss({ period: period, values: [] });\r\n    let count = 1;\r\n    this.generator = (function* (period){\r\n      var current = yield;\r\n      var lastAvgGain,lastAvgLoss, RS, currentRSI;\r\n      while(true){\r\n        lastAvgGain = GainProvider.nextValue(current);\r\n        lastAvgLoss = LossProvider.nextValue(current);\r\n        if((lastAvgGain!==undefined) && (lastAvgLoss!==undefined)){\r\n          if(lastAvgLoss === 0){\r\n            currentRSI = 100;\r\n          } else if(lastAvgGain === 0 ) { \r\n            currentRSI = 0;\r\n          } else {\r\n            RS = lastAvgGain / lastAvgLoss;\r\n            RS = isNaN(RS) ? 0 : RS;\r\n            currentRSI = parseFloat((100 - (100 / (1 + RS))).toFixed(2));\r\n          }\r\n        }\r\n        count++;\r\n        current = yield currentRSI;\r\n      }\r\n    })(period);\r\n\r\n    this.generator.next();\r\n\r\n    this.result = [];\r\n\r\n    values.forEach((tick) => {\r\n      var result = this.generator.next(tick);\r\n      if(result.value !== undefined){\r\n        this.result.push(result.value);\r\n      }\r\n    });\r\n  };\r\n\r\n  static calculate = rsi;\r\n\r\n    nextValue(price:number):number | undefined {\r\n        return this.generator.next(price).value;\r\n    };\r\n}\r\n\r\nexport function rsi(input:RSIInput):number[] {\r\n       Indicator.reverseInputs(input);\r\n        var result = new RSI(input).result;\r\n        if(input.reversedInput) {\r\n            result.reverse();\r\n        }\r\n        Indicator.reverseInputs(input);\r\n        return result;\r\n    };\r\n"],"mappings":"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","ignoreList":[]}