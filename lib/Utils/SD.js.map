{"version":3,"file":"SD.js","names":["_indicator","require","_SMA","_FixedSizeLinkedList","_interopRequireDefault","SDInput","IndicatorInput","period","values","exports","SD","Indicator","generator","constructor","input","priceArray","sma","SMA","format","v","result","tick","mean","currentSet","LinkedList","sd","push","nextValue","sum","x","iterator","Math","pow","sqrt","next","forEach","value","undefined","calculate","price","nextResult","reverseInputs","reversedInput","reverse"],"sources":["../../src/Utils/SD.ts"],"sourcesContent":["import { IndicatorInput, Indicator } from '../indicator/indicator';\r\nimport { SMA } from '../moving_averages/SMA';\r\nimport LinkedList from '../Utils/FixedSizeLinkedList';\r\n/**\r\n * Created by AAravindan on 5/7/16.\r\n */\r\n\"use strict\"\r\n\r\n\r\nexport class SDInput extends IndicatorInput{\r\n  period:number\r\n  values:number[];\r\n};\r\n\r\nexport class SD extends Indicator {\r\n  generator:IterableIterator<number | undefined>;\r\n  constructor (input:SDInput) {\r\n    super(input);\r\n    var period = input.period\r\n    var priceArray = input.values;\r\n\r\n    var sma = new SMA({period : period, values : [], format : (v:number) => {return v}});\r\n\r\n    this.result = [];\r\n\r\n    this.generator = (function* (){\r\n      var tick;\r\n      var mean;\r\n      var currentSet = new LinkedList(period);;\r\n      tick = yield;\r\n      var sd;\r\n      while (true) {\r\n        currentSet.push(tick);\r\n        mean = sma.nextValue(tick);\r\n        if(mean){\r\n          let sum = 0;\r\n          for(let x of currentSet.iterator()){\r\n            sum = sum + (Math.pow((x - mean),2))\r\n          }\r\n          sd = Math.sqrt(sum / (period ))\r\n        }\r\n        tick = yield sd;\r\n      }\r\n    })();\r\n\r\n    this.generator.next();\r\n\r\n    priceArray.forEach((tick) => {\r\n      var result = this.generator.next(tick);\r\n      if(result.value != undefined){\r\n        this.result.push(this.format(result.value));\r\n      }\r\n    });\r\n  }\r\n\r\n  static calculate = sd;\r\n\r\n    nextValue(price:number):number | undefined {\r\n        var nextResult = this.generator.next(price);\r\n        if(nextResult.value != undefined)\r\n          return this.format(nextResult.value);\r\n    };\r\n} \r\n\r\nexport function sd(input:SDInput):number[] {\r\n       Indicator.reverseInputs(input);\r\n        var result = new SD(input).result;\r\n        if(input.reversedInput) {\r\n            result.reverse();\r\n        }\r\n        Indicator.reverseInputs(input);\r\n        return result;\r\n    };\r\n\r\n"],"mappings":"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","ignoreList":[]}