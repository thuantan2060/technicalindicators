{"version":3,"file":"ADL.js","names":["_indicator","require","ADLInput","IndicatorInput","high","low","close","volume","exports","ADL","Indicator","generator","constructor","input","highs","lows","closes","volumes","length","result","tick","moneyFlowMultiplier","isNaN","moneyFlowVolume","Math","round","next","forEach","tickHigh","index","tickInput","value","undefined","push","calculate","adl","nextValue","price","reverseInputs","reversedInput","reverse"],"sources":["../../src/volume/ADL.ts"],"sourcesContent":["/**\r\n * Created by AAravindan on 5/17/16.\r\n */\r\nimport { Indicator, IndicatorInput } from '../indicator/indicator';\r\nimport { CandleData } from '../StockData';\r\n\r\nexport class ADLInput extends IndicatorInput {\r\n  high:number[]\r\n  low:number[]\r\n  close:number[]\r\n  volume:number[]\r\n}\r\n\r\nexport class ADL extends Indicator {\r\n  generator:IterableIterator<number | undefined>;\r\n    constructor (input:ADLInput) {\r\n      super(input);\r\n      var highs       = input.high;\r\n      var lows        = input.low;\r\n      var closes      = input.close;\r\n      var volumes     = input.volume;\r\n\r\n      if(!((lows.length === highs.length) && (highs.length === closes.length) && (highs.length === volumes.length) )){\r\n        throw ('Inputs(low,high, close, volumes) not of equal size');\r\n      }\r\n\r\n      this.result = [];\r\n\r\n      this.generator = (function* (){\r\n        var result = 0;\r\n        var tick;\r\n        tick = yield;\r\n        while (true)\r\n        {\r\n          let moneyFlowMultiplier = ((tick.close  -  tick.low) - (tick.high - tick.close)) / (tick.high - tick.low);\r\n          moneyFlowMultiplier = isNaN(moneyFlowMultiplier) ? 1 : moneyFlowMultiplier;\r\n          let moneyFlowVolume = moneyFlowMultiplier * tick.volume;\r\n          result = result + moneyFlowVolume\r\n          tick = yield Math.round(result);\r\n        }\r\n      })();\r\n\r\n      this.generator.next();\r\n\r\n      highs.forEach((tickHigh, index) => {\r\n        var tickInput = {\r\n          high    : tickHigh,\r\n          low     : lows[index],\r\n          close   : closes[index],\r\n          volume  : volumes[index]\r\n        }\r\n        var result = this.generator.next(tickInput);\r\n        if(result.value != undefined){\r\n          this.result.push(result.value);\r\n        }\r\n      });\r\n  };\r\n\r\n  static calculate = adl;\r\n\r\n  nextValue(price:CandleData):number | undefined {\r\n     return this.generator.next(price).value;\r\n  };\r\n}\r\n\r\nexport function adl(input:ADLInput):number[] {\r\n      Indicator.reverseInputs(input);\r\n      var result = new ADL(input).result;\r\n      if(input.reversedInput) {\r\n          result.reverse();\r\n      }\r\n      Indicator.reverseInputs(input);\r\n      return result;\r\n  };"],"mappings":"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","ignoreList":[]}